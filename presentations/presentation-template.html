<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI-Native Architecture Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1e3a8a 0%, #0f172a 100%);
            color: #f1f5f9;
            overflow: hidden;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        #presentation {
            flex: 1;
            display: flex;
            position: relative;
            overflow: hidden;
        }
        
        .slides-container {
            flex: 1;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .slide {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            opacity: 0;
            transition: opacity 0.6s ease-in-out;
            animation: fadeIn 0.6s ease-in-out;
        }
        
        .slide.active {
            opacity: 1;
            z-index: 10;
        }
        
        .slide.hidden {
            opacity: 0;
            z-index: 0;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .slide-container {
            display: flex;
            height: 100%;
            width: 100%;
            gap: 15px;
            padding: 30px;
            align-items: stretch;
        }
        
        .slide-left {
            flex: 0 0 50%;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            gap: 15px;
            overflow-y: auto;
            padding-right: 15px;
            border-right: 2px solid rgba(100, 200, 255, 0.3);
        }
        
        .slide-divider {
            flex: 0 0 2px;
            background: linear-gradient(180deg, rgba(100, 200, 255, 0.3) 0%, transparent 50%, rgba(100, 200, 255, 0.3) 100%);
        }
        
        .slide-right {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow-y: auto;
            padding-left: 15px;
        }
        
        .slide-header {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            gap: 20px;
        }
        
        .slide-title {
            font-size: 2rem;
            font-weight: bold;
            color: #60a5fa;
            line-height: 1.3;
        }
        
        .slide-timer {
            font-size: 1.5rem;
            color: #fbbf24;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            min-width: 80px;
            text-align: right;
        }
        
        .narration-section {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .narration {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .narration li {
            font-size: 1.5rem;
            line-height: 2.0;
            color: #e2e8f0;
            font-weight: 500;
            padding-left: 20px;
            position: relative;
        }
        
        .narration li:before {
            content: "•";
            position: absolute;
            left: 0;
            color: #60a5fa;
            font-weight: bold;
        }
        
        .code-block {
            background: #1e293b;
            border: 1px solid #334155;
            border-radius: 8px;
            padding: 12px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.85rem;
            line-height: 1.5;
            color: #94a3b8;
            overflow-x: auto;
            overflow-y: auto;
            white-space: pre;
            word-wrap: normal;
            max-height: 90vh;
            max-width: 100%;
        }
        
        .code-block code {
            font-family: 'Courier New', Courier, monospace;
            letter-spacing: 0.5px;
        }
        
        .text-content {
            font-size: 0.95rem;
            line-height: 1.7;
            color: #cbd5e1;
            white-space: pre-wrap;
            word-wrap: break-word;
            font-family: 'Courier New', Courier, monospace;
            padding: 8px;
            max-width: 100%;
        }
        
        .content-placeholder {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1e3a8a 0%, #0f172a 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #64748b;
            font-size: 1.2rem;
        }
        
        .slide-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 20px;
            background: rgba(15, 23, 42, 0.8);
            border-top: 1px solid rgba(100, 200, 255, 0.2);
        }
        
        .slide-id {
            font-size: 0.85rem;
            color: #64748b;
            font-family: 'Courier New', monospace;
        }
        
        .controls {
            background: rgba(15, 23, 42, 0.95);
            border-top: 1px solid rgba(100, 200, 255, 0.3);
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 30px;
            flex-wrap: wrap;
        }
        
        .controls button, .controls input {
            padding: 8px 16px;
            background: #1e40af;
            color: #f1f5f9;
            border: 1px solid #3b82f6;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.95rem;
            transition: all 0.3s ease;
        }
        
        .controls button:hover {
            background: #1d4ed8;
            border-color: #60a5fa;
        }
        
        .controls input[type="range"] {
            flex: 1;
            min-width: 200px;
            padding: 5px;
        }
        
        .slide-counter {
            color: #cbd5e1;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            min-width: 80px;
            text-align: center;
        }
        
        .progress-bar {
            height: 3px;
            background: #334155;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 100;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6 0%, #60a5fa 100%);
            transition: width 0.1s linear;
        }
        
        /* Responsive Design */
        @media (max-width: 1024px) {
            .slide-container {
                flex-direction: column;
                gap: 10px;
                padding: 20px;
            }
            
            .slide-left {
                flex: 0 0 auto;
                border-right: none;
                border-bottom: 2px solid rgba(100, 200, 255, 0.3);
                padding-right: 0;
                padding-bottom: 10px;
            }
            
            .slide-right {
                flex: 1;
                padding-left: 0;
                padding-top: 10px;
            }
            
            .narration li {
                font-size: 1.2rem;
                line-height: 1.8;
            }
            
            .slide-title {
                font-size: 1.5rem;
            }
        }
        
        @media (max-width: 640px) {
            .slide-container {
                padding: 15px;
                gap: 5px;
            }
            
            .narration li {
                font-size: 1rem;
                line-height: 1.6;
            }
            
            .slide-title {
                font-size: 1.2rem;
            }
            
            .slide-timer {
                font-size: 1rem;
            }
            
            .controls {
                flex-direction: column;
                gap: 10px;
                padding: 10px;
            }
            
            .controls button {
                width: 100%;
            }
            
            .controls input[type="range"] {
                width: 100%;
            }
        }
        
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(100, 150, 200, 0.1);
        }
        
        ::-webkit-scrollbar-thumb {
            background: rgba(100, 150, 200, 0.4);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: rgba(100, 150, 200, 0.6);
        }
        
        /* Header Styles */
        .header {
            background: rgba(15, 23, 42, 0.95);
            border-bottom: 2px solid rgba(100, 200, 255, 0.3);
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 30px;
            flex-wrap: wrap;
        }
        
        .header-title {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        .header-title h1 {
            font-size: 1.5rem;
            color: #60a5fa;
            margin: 0;
            padding: 0;
        }
        
        .header-section {
            font-size: 0.95rem;
            color: #cbd5e1;
            margin: 0;
            padding: 0;
        }
        
        .header-links {
            display: flex;
            gap: 20px;
            align-items: center;
        }
        
        .header-links a {
            padding: 8px 16px;
            background: #1e40af;
            color: #f1f5f9;
            border: 1px solid #3b82f6;
            border-radius: 6px;
            text-decoration: none;
            font-size: 0.95rem;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .header-links a:hover {
            background: #1d4ed8;
            border-color: #60a5fa;
            transform: translateY(-2px);
        }
        
        @media (max-width: 1024px) {
            .header {
                padding: 12px 20px;
                flex-direction: column;
                align-items: flex-start;
            }
            
            .header-links {
                width: 100%;
                flex-wrap: wrap;
            }
        }
        
        @media (max-width: 640px) {
            .header {
                padding: 10px 15px;
            }
            
            .header-title h1 {
                font-size: 1.2rem;
            }
            
            .header-section {
                font-size: 0.85rem;
            }
            
            .header-links a {
                padding: 6px 12px;
                font-size: 0.85rem;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-title">
            <h1>🤖 AI-Native Architecture Demo</h1>
            <p class="header-section" id="sectionName">Introduction & Context</p>
        </div>
        <div class="header-links">
            <a href="https://github.com/coolksrini/ai-native-application-architecture-whitepaper" target="_blank" title="View the full whitepaper on GitHub">
                📄 View Whitepaper
            </a>
        </div>
    </div>
    
    <div class="progress-bar">
        <div class="progress-fill" id="progressFill"></div>
    </div>
    
    <div id="presentation">
        <div class="slides-container" id="slidesContainer">
            {slides_html}
        </div>
    </div>
    
    <div class="controls">
        <button id="prevBtn">← Previous</button>
        <button id="playBtn">▶ Play</button>
        <button id="nextBtn">Next →</button>
        <input type="range" id="slideSlider" min="0" max="100" value="0">
        <span class="slide-counter"><span id="currentSlide">1</span> / <span id="totalSlides">0</span></span>
    </div>

    <script>
        class PresentationController {
            constructor() {
                this.slides = Array.from(document.querySelectorAll('.slide'));
                this.currentSlideIndex = 0;
                this.isPlaying = false;
                this.slideTimer = null;
                this.countdownInterval = null;
                
                document.getElementById('totalSlides').textContent = this.slides.length;
                
                this.setupEventListeners();
                this.showSlide(0);
            }
            
            setupEventListeners() {
                document.getElementById('prevBtn').addEventListener('click', () => this.previousSlide());
                document.getElementById('nextBtn').addEventListener('click', () => this.nextSlide());
                document.getElementById('playBtn').addEventListener('click', () => this.togglePlay());
                document.getElementById('slideSlider').addEventListener('input', (e) => {
                    const index = Math.floor((e.target.value / 100) * (this.slides.length - 1));
                    this.showSlide(index);
                });
                
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'ArrowLeft') this.previousSlide();
                    if (e.key === 'ArrowRight') this.nextSlide();
                    if (e.key === ' ') {
                        e.preventDefault();
                        this.togglePlay();
                    }
                    if (e.key === 'Escape') this.stopPlay();
                });
            }
            
            showSlide(index) {
                if (index < 0) index = this.slides.length - 1;
                if (index >= this.slides.length) index = 0;
                
                this.slides.forEach((slide, i) => {
                    slide.classList.remove('active', 'hidden');
                    if (i === index) {
                        slide.classList.add('active');
                    } else {
                        slide.classList.add('hidden');
                    }
                });
                
                this.currentSlideIndex = index;
                document.getElementById('currentSlide').textContent = index + 1;
                document.getElementById('slideSlider').value = (index / (this.slides.length - 1)) * 100;
                
                // Update section name from slide data
                const currentSlide = this.slides[index];
                const sectionName = currentSlide.getAttribute('data-section') || 'Presentation';
                document.getElementById('sectionName').textContent = sectionName;
                
                // Reset timer display to full duration (if not playing)
                if (!this.isPlaying) {
                    const timerElement = currentSlide.querySelector('.slide-timer');
                    const duration = parseInt(currentSlide.getAttribute('data-duration')) || 25;
                    if (timerElement) {
                        timerElement.textContent = `00:${duration.toString().padStart(2, '0')}`;
                    }
                }
                
                this.updateProgressBar();
            }
            
            nextSlide() {
                this.showSlide(this.currentSlideIndex + 1);
            }
            
            previousSlide() {
                this.showSlide(this.currentSlideIndex - 1);
            }
            
            updateProgressBar() {
                const progress = ((this.currentSlideIndex + 1) / this.slides.length) * 100;
                document.getElementById('progressFill').style.width = progress + '%';
            }
            
            togglePlay() {
                if (this.isPlaying) {
                    this.stopPlay();
                } else {
                    this.play();
                }
            }
            
            play() {
                this.isPlaying = true;
                document.getElementById('playBtn').textContent = '⏸ Pause';
                this.startCountdown();
                this.autoAdvanceSlides();
            }
            
            startCountdown() {
                // Clear any existing countdown
                if (this.countdownInterval) {
                    clearInterval(this.countdownInterval);
                }
                
                const slide = this.slides[this.currentSlideIndex];
                const timerElement = slide.querySelector('.slide-timer');
                if (!timerElement) return;
                
                const duration = parseInt(slide.getAttribute('data-duration')) || 25;
                let remaining = duration;
                
                // Update immediately
                timerElement.textContent = `00:${remaining.toString().padStart(2, '0')}`;
                
                this.countdownInterval = setInterval(() => {
                    remaining--;
                    
                    // Stop if we've gone negative or not playing anymore
                    if (remaining < 0 || !this.isPlaying) {
                        clearInterval(this.countdownInterval);
                        this.countdownInterval = null;
                        return;
                    }
                    
                    // Update display
                    if (timerElement && timerElement.parentElement) {
                        timerElement.textContent = `00:${remaining.toString().padStart(2, '0')}`;
                    } else {
                        // Timer element was removed, stop interval
                        clearInterval(this.countdownInterval);
                        this.countdownInterval = null;
                    }
                }, 1000);
            }
            
            autoAdvanceSlides() {
                const slide = this.slides[this.currentSlideIndex];
                const duration = parseInt(slide.getAttribute('data-duration')) || 25;
                
                this.slideTimer = setTimeout(() => {
                    if (this.currentSlideIndex < this.slides.length - 1) {
                        this.nextSlide();
                        // Reset timer for new slide
                        const newSlide = this.slides[this.currentSlideIndex];
                        const newDuration = parseInt(newSlide.getAttribute('data-duration')) || 25;
                        const timerElement = newSlide.querySelector('.slide-timer');
                        if (timerElement) {
                            timerElement.textContent = `00:${newDuration.toString().padStart(2, '0')}`;
                        }
                        this.autoAdvanceSlides();
                        this.startCountdown();
                    } else {
                        this.stopPlay();
                    }
                }, duration * 1000);
            }
            
            stopPlay() {
                this.isPlaying = false;
                document.getElementById('playBtn').textContent = '▶ Play';
                if (this.slideTimer) clearTimeout(this.slideTimer);
                if (this.countdownInterval) clearInterval(this.countdownInterval);
            }
        }
        
        // Initialize on DOM ready, not page load (faster feedback)
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => {
                new PresentationController();
            });
        } else {
            // DOM already loaded (e.g., after navigation)
            new PresentationController();
        }
    </script>
</body>
</html>
